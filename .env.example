# ── Required ────────────────────────────────────────────────────────────────────

# Alchemy (or any JSON-RPC) endpoint
RPC_URL=https://eth-mainnet.g.alchemy.com/v2/YOUR_API_KEY

# PostgreSQL connection string
DATABASE_URL=postgres://indexer:indexer@localhost:5432/indexer

# Block range to index (inclusive)
BLOCK_FROM=19000000
BLOCK_TO=19005000

# ── Optional (shown with defaults) ──────────────────────────────────────────────

# Process role: coordinator (migrations, seeding, sweep, API) | worker (chunk processing only)
# docker-compose.yml sets this per service; only needed for direct binary invocation
MODE=coordinator

# Blocks per chunk (each worker fetches one chunk at a time)
CHUNK_SIZE=10

# Max processing attempts before a chunk is marked failed
MAX_ATTEMPTS=3

# How often the sweep process runs (ms)
SWEEP_INTERVAL_MS=30000

# Idle sleep between worker iterations when no chunk is available (ms); 0 = max speed
WORKER_INTERVAL_MS=10

# Age of an in_progress chunk before the sweep reclaims it (ms)
CLAIM_TIMEOUT_MS=120000

# Truncate chunks + logs on startup and re-index from scratch
FRESH_START=true

# HTTP API listen port
API_PORT=3000

# pgxpool max connections
DB_POOL_SIZE=20
